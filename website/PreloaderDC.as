package {	/**	* Imports	**/	import com.greensock.TweenLite;	import com.greensock.TweenMax;	import com.greensock.events.TweenEvent;	import com.greensock.plugins.BlurFilterPlugin;		import flash.display.Loader;	import flash.display.LoaderInfo;	import flash.display.Sprite;	import flash.events.Event;	import flash.events.ProgressEvent;	import flash.net.URLRequest;	import flash.system.Security;	import flash.system.SecurityDomain;		import nl.demonsters.debugger.MonsterDebugger;
		/**	* Class	**/	public class PreloaderDC extends Sprite	{		/**		* Variables	 	**/		private var _loader:Loader;		private var _loaderprogress:LoaderProgressMC;				/**		* Constructor		**/		public function PreloaderDC()		{			//add event listener			//this.addEventListener(Event.ADDED_TO_STAGE, init);			init();						Security.allowDomain("http://api.twitter.com");			Security.allowDomain("http://twitter.com");			Security.allowDomain("twitter.com");			Security.allowDomain("api.twitter.com");		}				/**		 * Init function		 * When added to the stage		 **/		private function init(evt:Event=null):void		{			//create new loader progress mc			this._loaderprogress = new LoaderProgressMC();			this._loaderprogress.x = this.stage.stageWidth * .5;			this._loaderprogress.y = this.stage.stageHeight * .5;			this.addChild(this._loaderprogress);						//create new loader instance			this._loader = new Loader();			this._loader.addEventListener(Event.ACTIVATE, handleLoaderActivate);			this._loader.contentLoaderInfo.addEventListener(Event.COMPLETE, handleLoaderComplete);			this._loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, handleLoaderProgress);						//load the file			this._loader.load(new URLRequest("promosite.swf"));		}				private function handleLoaderActivate(evt:Event):void		{			/*MonsterDebugger.trace(this, "activate loader");*/			this._loaderprogress.txtMessage.text = "loading site...";			this._loaderprogress.txtPercentage.text = "00%";		}				private function handleLoaderProgress(evt:ProgressEvent):void
		{
			var perc:Number = Math.round((evt.bytesLoaded / evt.bytesTotal)*100);						this._loaderprogress.txtPercentage.text = perc + "%";			this._loaderprogress.loadBar.gotoAndStop(perc);						/*MonsterDebugger.trace(this, perc);			MonsterDebugger.trace(this, this._loaderprogress.loadBar.maskbar.currentFrame);			MonsterDebugger.trace(this, this._loaderprogress.txtPercentage.text);*/
		}				/**		 * Loader complete		 * 		 * When promosite.swf is fully loaded		 **/		protected function handleLoaderComplete(evt:Event):void
		{			TweenMax.to(this._loaderprogress, 1, {alpha:0, blurFilter:{blurX:12, blurY:12}, onComplete:removeLoaderProgress});						var loaderInfo:LoaderInfo = evt.target as LoaderInfo;						//UNDEFINED => ALLES LADEN			var content:* = loaderInfo.content;						if(content is PromositeDC)			{				var _main:PromositeDC = content as PromositeDC;				addChild(_main);			}
		}				/**		 * Remove the preloader from the stage		 **/		private function removeLoaderProgress():void		{			this.removeChild(this._loaderprogress);			this._loader = null;		}	}}